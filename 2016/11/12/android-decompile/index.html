<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Android APK 反编译 · krasie's blog</title><meta name="description" content="Android APK 反编译 - krasie"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://krasie.github.io/atom.xml" title="krasie's blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/gaoguancong" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/krasie" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Android APK 反编译</h1><div class="post-info">Nov 12, 2016</div><div class="post-content"><p>最近在做一个 app 的爬虫，发现密码竟然是加密的，模拟登录做不了，就想研究一下 Android APK 的反编译，把加密算法拿出来，发现不难。</p>
<a id="more"></a>
<h4 id="使用工具"><a href="#使用工具" class="headerlink" title="使用工具"></a>使用工具</h4><p>apktool<br>dex2jar<br>jd-gui</p>
<h4 id="工具介绍"><a href="#工具介绍" class="headerlink" title="工具介绍"></a>工具介绍</h4><h5 id="apktool"><a href="#apktool" class="headerlink" title="apktool"></a>apktool</h5><p>作用：资源文件获取，可以提取出图片文件和布局文件进行使用查看</p>
<h5 id="dex2jar"><a href="#dex2jar" class="headerlink" title="dex2jar"></a>dex2jar</h5><p>作用：将 apk 反编译成 Java 源码（classes.dex 转化成 jar 文件）</p>
<h5 id="jd-gui"><a href="#jd-gui" class="headerlink" title="jd-gui"></a>jd-gui</h5><p>作用：查看 APK 中 classes.dex 转化成出的 jar 文件，即源码文件</p>
<h4 id="反编译流程"><a href="#反编译流程" class="headerlink" title="反编译流程"></a>反编译流程</h4><h5 id="反编译获取资源文件"><a href="#反编译获取资源文件" class="headerlink" title="反编译获取资源文件"></a>反编译获取资源文件</h5><p>下载上述工具中的 apktool，解压得到3个文件：aapt.exe，apktool.bat，apktool.jar ，将需要反编译的APK文件放到该目录下，<br>打开命令行界面（运行-CMD） ，定位到apktool文件夹，输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool d [-s] -f &lt;apkPath&gt; -o &lt;folderPath&gt;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/6b0fdc0dgw1f9pqoo5xysj20la06ijto.jpg" alt=""></p>
<h5 id="APK-反编译得到-Java-源代码"><a href="#APK-反编译得到-Java-源代码" class="headerlink" title="APK 反编译得到 Java 源代码"></a>APK 反编译得到 Java 源代码</h5><p>将要反编译的 APK 后缀名改为 .rar 或 .zip，并解压，得到其中的额 classes.dex 文件（它就是java文件编译再通过dx工具打包而成的），将获取到的 classes.dex 放到之前解压出来的工具 dex2jar 文件夹内</p>
<p>在命令行下定位到 dex2jar.bat 所在目录，输入 dex2jar.bat classes.dex，效果如下：</p>
<p><img src="http://ww4.sinaimg.cn/large/6b0fdc0dgw1f9pr3dwtu6j20aq01q3yq.jpg" alt=""></p>
<p>在改目录下会生成一个 classes_dex2jar.jar 的文件，然后打开工具jd-gui文件夹里的 jd-gui.exe ，之后用该工具打开之前生成的 classes_dex2jar.jar 文件，便可以看到源码了，效果如下：</p>
<p><img src="http://ww4.sinaimg.cn/large/6b0fdc0dgw1f9pr73ldmxj20sy0k3thk.jpg" alt=""></p>
<p>嘿嘿，加密算法也就这样找到了。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/12/04/linux-commonly-used-commands/" class="prev">PREV</a><a href="/2016/08/28/centos7-php7-install-mongodb/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2018 <a href="http://krasie.github.io">krasie</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>